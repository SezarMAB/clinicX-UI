<div class="appointments-today">
  <div class="appointments-today__toggle-layout">
    <button mat-icon-button 
            (click)="toggleLayout()"
            [matTooltip]="layoutOrder() === 'panel-first' ? 'تبديل إلى التفاصيل أولاً' : 'تبديل إلى المواعيد أولاً'">
      <mat-icon>swap_horiz</mat-icon>
    </button>
  </div>
  
  <div class="appointments-today__container" [class.appointments-today__container--reversed]="layoutOrder() === 'details-first'">
    <section class="appointments-today__panel" [style.width.px]="panelWidth()">
      <app-appointments-panel
        (appointmentSelected)="onAppointmentSelected($event)"
        [selectedAppointmentId]="selectedAppointmentId()">
      </app-appointments-panel>
    </section>

    <div 
      class="appointments-today__resize-handle"
      (mousedown)="startResize($event)"
      (touchstart)="startResize($event)">
      <div class="resize-handle-inner"></div>
    </div>

    <section class="appointments-today__details">
      @if (selectedPatientId()) {
        <app-patient-details
          [patientId]="selectedPatientId()">
        </app-patient-details>
      } @else {
        <div class="appointments-today__placeholder">
          <mat-icon>event_note</mat-icon>
          <h2>لم يتم اختيار موعد</h2>
          <p>الرجاء اختيار موعد من القائمة لعرض تفاصيل المريض</p>
        </div>
      }
    </section>
  </div>
</div>
